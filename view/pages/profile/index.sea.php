<?= $this->extend('layouts.auth') ?>

<?= $this->share('title', 'Profile') ?>

<?= $this->section('content') ?>
  <div class="container d-flex justify-content-center align-items-center my-3">
    <?php if (empty($get('data'))): ?>
      <div class="alert alert-danger" role="alert">
        Data is empty
      </div>
    <?php else: ?>
      <form action="<?= route('profile.update') ?>?id=<?= $get('data')['id'] ?>" method="post">
        <div class="mb-3">
          <label for="name" class="form-label">Nama</label>
          <input type="text" class="form-control" id="name" name="name" value="<?= $get('data')['name'] ?>">
        </div>

        <?php if ($get('error_form') && array_key_exists('name', $get('error_form'))): ?>
          <div class="alert alert-danger" role="alert">
          <?= $get('error_form')['name'] ?>
          </div>
        <?php endif; ?>

        <div class="mb-3">
          <label for="username" class="form-label">Username</label>
          <input type="text" class="form-control" id="username" name="username" value="<?= $get('data')['username'] ?>">
        </div>

        <?php if ($get('error_form') && array_key_exists('username', $get('error_form'))): ?>
          <div class="alert alert-danger" role="alert">
          <?= $get('error_form')['username'] ?>
          </div>
        <?php endif; ?>

        <div class="mb-3">
          <label for="password" class="form-label">Password (optional)</label>
          <input type="password" class="form-control" id="password" name="password" placeholder="Your New Password">
        </div>

        <?php if ($get('error_form') && array_key_exists('password', $get('error_form'))): ?>
          <div class="alert alert-danger" role="alert">
          <?= $get('error_form')['password'] ?>
          </div>
        <?php endif; ?>

        <?php if ($get('error')): ?>
          <div class="alert alert-danger" role="alert">
            <?= $get('error') ?>
          </div>
        <?php endif; ?>

        <button type="submit" class="btn btn-primary">Submit</button>
        <a href="<?= route('landing') ?>" class="btn btn-secondary">Back</a>
      </form>
    <?php endif; ?>
  </div>
<?= $this->stop() ?>
