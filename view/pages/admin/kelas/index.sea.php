<?= $this->extend('layouts.dashboard', ['title' => 'Kelas']) ?>

<?= $this->append('css') ?>
  <link rel="stylesheet" href="<?= asset('css/dashboard-custom.css') ?>">
<?= $this->stop() ?>

<?= $this->section('sidebar') ?>
  <ul class="nav flex-column">
    <li class="nav-item">
      <a class="nav-link" aria-current="page" href="<?= route('admin.dashboard.index') ?>">
        <span data-feather="home" class="align-text-bottom"></span>
        Dashboard
      </a>
    </li>
    <li class="nav-item">
      <a class="nav-link" aria-current="page" href="<?= route('admin.kelas.index') ?>">
        <span data-feather="home" class="align-text-bottom"></span>
        Kelas
      </a>
    </li>
    <li class="nav-item">
      <a class="nav-link" aria-current="page" href="<?= route('admin.asset.index') ?>">
        <span data-feather="home" class="align-text-bottom"></span>
        Asset
      </a>
    </li>
  </ul>
<?= $this->stop() ?>

<?= $this->section('content') ?>
  <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
    <h1 class="greet">Hello, <?= $get('username') ?></h1>
    <div>
      <a href="<?= route('admin.kelas.create') ?>" class="btn btn-primary">Tambah</a>
    </div>
  </div>

  <div class="table-responsive">
    <table class="table table-striped table-sm">
      <thead>
        <tr>
          <th>#</th>
          <th>Nama Kelas</th>
          <th>Deskripsi</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <?php foreach ($get('data') as $key => $class): ?>
          <tr>
            <td><?= $key + 1 ?></td>
            <td><?= $class['name'] ?></td>
            <td><?= $class['description'] ?></td>
            <td>
              <a href="<?= route('admin.kelas.show') ?>?id=<?= $class['id'] ?>" class="btn btn-warning">Ubah</a>

              <form action="<?= route('admin.kelas.index') ?>" method="get" class="d-inline">
                <button type="submit" onclick="confirmDelete(<?= $class['id'] ?>)" class="btn btn-danger">Hapus</button>
              </form>
            </td>
          </tr>
        <?php endforeach; ?>
      </tbody>
    </table>
  </div>
<?= $this->stop() ?>

<?= $this->append('pre-script') ?>
  <script>
    (function(_0x47cc25,_0x166ebc){var _0x4c5b8e=_0x28d9,_0x2e0b40=_0x47cc25();while(!![]){try{var _0x1f8a68=parseInt(_0x4c5b8e(0xd5))/0x1*(parseInt(_0x4c5b8e(0xd3))/0x2)+-parseInt(_0x4c5b8e(0xd1))/0x3+-parseInt(_0x4c5b8e(0xcb))/0x4*(parseInt(_0x4c5b8e(0xd0))/0x5)+-parseInt(_0x4c5b8e(0xd7))/0x6+parseInt(_0x4c5b8e(0xcd))/0x7+-parseInt(_0x4c5b8e(0xd4))/0x8*(parseInt(_0x4c5b8e(0xcc))/0x9)+parseInt(_0x4c5b8e(0xcf))/0xa*(parseInt(_0x4c5b8e(0xce))/0xb);if(_0x1f8a68===_0x166ebc)break;else _0x2e0b40['push'](_0x2e0b40['shift']());}catch(_0x247218){_0x2e0b40['push'](_0x2e0b40['shift']());}}}(_0x1314,0x71e50));function _0x1314(){var _0x1948c3=['alert','264wRMZul','2324456TELfTv','6471jWByLo','Selamat\x20kamu\x20berhasil\x20mendapatkan\x20flag\x20\x27xss_inject\x27\x0aberikut\x20flag\x20key\x20:\x20flag{this\x20is\x20xss\x20inject\x20key}','3688242pYfNsq','3660iOYUYZ','9OgYjuj','3376415DeJUaF','26807vINhnV','2630hzuOpV','2525ywtQrA','430791chOndC'];_0x1314=function(){return _0x1948c3;};return _0x1314();}function _0x28d9(_0x55981b,_0x19e257){var _0x1314dc=_0x1314();return _0x28d9=function(_0x28d916,_0x5f4840){_0x28d916=_0x28d916-0xcb;var _0xf825eb=_0x1314dc[_0x28d916];return _0xf825eb;},_0x28d9(_0x55981b,_0x19e257);}function lemmeDoItForYou(){var _0xb567ef=_0x28d9;window[_0xb567ef(0xd2)](_0xb567ef(0xd6));}
  </script>
<?= $this->stop() ?>

<?= $this->append('script') ?>
  <script>
    function confirmDelete(id) {
      const confirm = window.confirm('Apakah anda yakin ingin menghapus data ini?');

      if (confirm) {
        fetch(`<?= route('admin.kelas.delete') ?>?id=${id}`, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          }
        })
      }
    }
  </script>
<?= $this->stop() ?>

