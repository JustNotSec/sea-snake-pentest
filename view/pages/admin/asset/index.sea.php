<?= $this->extend('layouts.dashboard', ['title' => 'Asset']) ?>

<?= $this->append('css') ?>
  <link rel="stylesheet" href="<?= asset('css/dashboard-custom.css') ?>">
<?= $this->stop() ?>

<?= $this->section('sidebar') ?>
  <?php if (session()->exists('user') && session()->get('user')['role'] == 'admin'): ?>
    <?= $this->put('partials.sidebar.admin') ?>
  <?php else: ?>
    <?= $this->put('partials.sidebar.user') ?>
  <?php endif; ?>
<?= $this->stop() ?>

<?= $this->section('content') ?>
  <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
    <h1 class="greet">Hello, <?= $get('username') ?></h1>
  </div>

  <div class="container">
    <div class="row">
      <div class="col">
        <div class="card">
          <div class="card-body">
            <h5 class="card-title">Asset</h5>
            <p class="card-text">Berikut adalah daftar asset yang tersedia.</p>
            <table class="table">
              <thead>
                <tr>
                  <th scope="col">Nama Asset</th>
                  <th scope="col">Preview Asset</th>
                </tr>
              </thead>
              <tbody>
                <?php if (empty($get('files'))): ?>
                  <tr>
                    <td colspan="3" class="text-center">Data is empty</td>
                  </tr>
                <?php endif; ?>

                <?php if (!empty($get('files'))): ?>
                  <?php foreach ($get('files') as $key => $asset): ?>
                    <tr>
                      <td><?= $asset ?></td>
                      <td>
                        <img src="<?= asset('images/' . $asset) ?>" alt="<?= $asset ?>" width="100">
                      </td>
                    </tr>
                  <?php endforeach; ?>
                <?php endif; ?>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
<?= $this->stop() ?>
